---
layout: post
title: アリス歌うよbotを作ったよ
date: 2013-08-14 00:00:00
category : ruby
tags : [ruby, twitter, bot, MeCab]
---

きんいろモザイクのアリスちゃんかわいい。

アリスbotを作りました。

> [アリス歌うよbot](http://twitter.com/alice_utauyo "アリス歌うよbot")

アニメ、きんいろモザイクの4話に出てくる「わたし、何もあげられるもの無いから歌を歌うよ！」というセリフをネタにして作りました。

きんいろモザイクをしらない方へ、こちらが公式サイトです。

> [ＴＶアニメ「きんいろモザイク」公式サイト](http://www.kinmosa.com/ "ＴＶアニメ「きんいろモザイク」公式サイト")

仕組みとしては、タイムラインからツイートを拾ってきて「名詞...動詞」の部分を抜き出して動詞を基本形に直してから「わたし、何もあげられるもの無いから○○よ！」にはめ込んでいます。

ちなみにリフォローは手動です。

純粋にこれだけしかしないbotというのもつまらないのでお遊びに変な機能突っ込もうかと考えています。

##mecab-rubyが気持ち悪い

形態素解析は面白いですね。`MeCab`を利用して行っています。

わりと砕けた文章でも意外にうまく解析できたりして結構遊べます。

このbotではRubyから扱う為に`mecab-ruby`というgemを利用しているのですが、`parseToNode`メソッドの戻り値の使い勝手が悪過ぎる気がしました。

格納されているのはnodeオブジェクトで、解析した文章が単語ごとで区切られて入っています。`next`メソッドで次の語を参照することができます。

なぜイテレータが使えないのですか。

Rubyなのに。

`While`文を使うのは非常に気持ち悪かったので`MeCabModel`というクラスを書いて`node`の中身を扱いやすくプロパティも増やし、`Array`に格納して吐き出すようにしました。

ここにコードを添付しようと思ったのですが、やっぱりまだ納得のいった拡張ではないので貼りません。

そんなこんなでアリス歌うよbotは生まれました。

私は綾の方が好きですけどね。
